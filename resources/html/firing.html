
{{ define "content" }}
<a href="/firing/{{ .firing.ID }}/edit" id="add-firing">
    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
        Edit
    </button>
</a>
    <div class="mdl-list" style="width:400px;">
        <div class="mdl-list__item">
            <span class="mdl-list__item-primary-content">Start/End Date:</span>
            <span class="mdl-list__item-secondary-content">{{ .firing.StartDate.Format "Mon, Jan _2 3:04PM" }}<br/>{{ .firing.EndDate.Format "Mon, Jan _2 3:04PM" }}</span>
        </div>
        <div class="mdl-list__item">
            <span class="mdl-list__item-primary-content">Starting ambient temp:</span>
            <span class="mdl-list__item-secondary-content">{{ .firing.StartDateAmbientTemp }}˚C</span>
        </div>
        <div class="mdl-list__item">
            <span class="mdl-list__item-primary-content">Peak temp:</span>
            <span class="mdl-list__item-secondary-content">{{ .peakTemperature }}˚C</span>
        </div>
        <div class="mdl-list__item">
            <span class="mdl-list__item-primary-content">Cone:</span>
            <span class="mdl-list__item-secondary-content">{{ .firing.ConeNumber }}</span>
        </div>
        <div class="mdl-list__item">
            <span class="mdl-list__item-primary-content">Notes:</span>
            <span class="mdl-list__item-secondary-content">{{ .firing.Notes }}</span>
        </div>
    </div>

    <div class="mdl-grid">

        <div class="mdl-shadow--2dp mdl-color--white mdl-cell mdl-cell--8-col">
            <canvas id="myChart" width="400" height="400"></canvas>
        </div>
    </div>
    <div class="mdl-button mdl-button--colored mdl-button--raised mdl-js-button mdl-js-ripple-effect" style="margin:5px;" onclick="document.getElementById('raw-data').style='display:;';">Raw Data</div>
    <div class="mdl-button mdl-button--colored mdl-button--raised mdl-js-button mdl-js-ripple-effect" style="margin:5px;" onclick="addOuterData();">Ambient Temperatures</div>
    <table id="raw-data"style="display: none;">
    {{ range .temperatureReadings }}
        <tr><td>{{ . }}</td></tr>
    {{ end }}
    </table>


    <script>
        var myChart;
        var innerOnlyData = {
                // Labels should be Date objects
                labels: [ {{ range .temperatureReadings }}moment("{{ .CreatedDate.Format "2006-01-02 15:04:05" }}"),{{ end }} ],
                datasets: [{
                    fill: false,
                    label: 'Temperature',
                    data: [{{ range .temperatureReadings }}{{ .Inner }},{{ end }}],
                    borderColor: '#fe8b36',
                    backgroundColor: '#fe8b36',
                    lineTension: 0.1
                }]
            };

            var allData = {
                // Labels should be Date objects
                labels: [ {{ range .temperatureReadings }}moment("{{ .CreatedDate.Format "2006-01-02 15:04:05" }}"),{{ end }} ],
                datasets: [{
                    fill: false,
                    label: 'Inner Temperature',
                    data: [{{ range .temperatureReadings }}{{ .Inner }},{{ end }}],
                    borderColor: '#fe8b36',
                    backgroundColor: '#fe8b36',
                    lineTension: 0.1,
                    yAxisID: 'A'
                },
                {
                    fill: false,
                    label: 'Outer Temperature',
                    data: [{{ range .temperatureReadings }}{{ .Outer }},{{ end }}],
                    borderColor: '#4caf50',
                    backgroundColor: '#4caf50',
                    lineTension: 0.1,
                    yAxisID: 'B'
                }]
            };

        function addOuterData() {
            if (myChart.options.scales.yAxes[1].display == false) {
                myChart.data = allData
            } else {
                myChart.data = innerOnlyData
            }

            myChart.options.scales.yAxes[1].display=!myChart.options.scales.yAxes[1].display;

            myChart.update();
        }

        window.onload = renderChart(innerOnlyData);
    </script>
{{ end }}